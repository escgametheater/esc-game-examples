(window.webpackJsonp=window.webpackJsonp||[]).push([["2-esc-controller-sdk"],{"./node_modules/@esc_games/esc-controller-sdk/ESCGameController.css":function(e,n,t){},"./node_modules/@esc_games/esc-controller-sdk/ESCGameController.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.ESCGameController=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(t("./node_modules/react/index.js")),d=t("./node_modules/react-redux/es/index.js"),m=r(t("./node_modules/@esc_games/esc-controller-sdk/images/esc-logo.png")),g=t("./node_modules/@esc_games/esc-controller-sdk/debug/index.js"),f=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/Screen.js")),p=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/NoSleep.js")),b=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/LockOrientation.js")),_=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/Fullscreen.js")),h=t("./node_modules/@esc_games/esc-controller-sdk/input/accelerometer.js"),w=t("./node_modules/@esc_games/esc-react-redux/index.js"),v=t("./node_modules/@esc_games/esc-controller-sdk/metrics/frameRate.js");t("./node_modules/@esc_games/esc-controller-sdk/ESCGameController.css"),window.frameRateMetrics=v.frameRateMetrics;var E=(0,w.initializeStore)({}),O=function(e){function n(e){var t;(0,s.default)(this,n),t=(0,i.default)(this,(0,l.default)(n).call(this,e));var o=e.captureFps,r=void 0!==o&&o,a=e.captureAccelerometer,c=void 0!==a&&a;return r&&(0,v.initFrameRateWatcher)(),c&&(0,h.initAccelerometerListener)(),t}return(0,c.default)(n,e),(0,a.default)(n,[{key:"render",value:function(){var e=this.props,n=e.controllerId,t=void 0===n?"controllerId":n,o=e.className,r=void 0===o?"":o,s=e.debug,a=e.game,i=e.includeESCLogo,l=void 0===i||i,c=e.desiredOrientation,h=void 0!==c&&c,w=e.appModeEnabled,v=void 0===w||w,O=(e.captureTouchEvents,e.lockOrientation),N=void 0!==O&&O,y=e.forceFullscreen,C=void 0!==y&&y;return u.default.createElement(d.Provider,{store:E},u.default.createElement(u.Fragment,null,u.default.createElement(p.default,null),u.default.createElement(f.default,{desiredOrientation:h,preventZoom:v}),C&&u.default.createElement(_.default,null),h&&N&&u.default.createElement(b.default,{desiredOrientation:h}),u.default.createElement("div",{id:t,className:"esc-controller size-considering-locked-orientation ".concat(r)},l?u.default.createElement("header",{className:"controller-header"},u.default.createElement("img",{src:m.default,className:"App-logo",alt:"logo",style:{background:"#000"}})):null,u.default.createElement("div",{className:"controller-"+a},this.props.children,s?u.default.createElement("div",null,u.default.createElement(g.DebugNotifications,null)):null))))}}]),n}(u.Component);n.ESCGameController=O},"./node_modules/@esc_games/esc-controller-sdk/ESCManager.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(n,"__esModule",{value:!0}),n.ACTION_ESC_COIN_AWARD=n.ACTION_GAME_CHANGED=n.ACTION_GAME_LOADED=n.ACTION_GAME_LIST=n.GameState=n.ESCManager=void 0;var s,a=o(t("./node_modules/@babel/runtime/regenerator/index.js")),i=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),g=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),f=r(t("./node_modules/react/index.js")),p=t("./node_modules/@esc_games/esc-controller-sdk/networking/ESCNetworking.js"),b=t("./node_modules/@esc_games/esc-react-redux/index.js");function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(t,!0).forEach(function(n){(0,l.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}t("./node_modules/@esc_games/esc-controller-sdk/esc-default.css");n.ACTION_GAME_LOADED="ESC:Loaded";n.ACTION_GAME_CHANGED="ESC:Changed";n.ACTION_GAME_LIST="ESC:List";n.ACTION_ESC_COIN_AWARD="ESC:CoinAward";var w=function(e){function n(){return(0,c.default)(this,n),(0,d.default)(this,(0,m.default)(n).apply(this,arguments))}return(0,g.default)(n,e),(0,u.default)(n,[{key:"render",value:function(){var e=this.props.debug;return f.default.createElement("div",null,e?f.default.createElement("pre",null,JSON.stringify(this.props,null,2)):null)}}]),n}(f.Component),v=new b.ReducerManager((s={},(0,l.default)(s,"ESC:Loaded",function(e,n){return h({},e,{network:h({},n.value)})}),(0,l.default)(s,"ESC:Changed",function(e,n){return E.currentGame=n.value,h({},e,{game:h({},e.game,{gameId:n.value})})}),(0,l.default)(s,"ESC:List",function(e,n){return h({},e,{gameList:n.value})}),s),{game:{gameId:"none",gameIsLoaded:"xyz"},network:{},debug:!0}),E=new b.EventManager("ESCManager",v);n.ESCManager=E;E.networking=p.ESCNetworking,p.ESCNetworking.init(),E.getCustomAssetUrl=function(e){var n=window.esc.page.game_instance.custom_game_assets;return n&&n.hasOwnProperty(e)?n[e]:null},E.networking.registerEventHandler("offline-game-update","ESC SDK",function(){var e=(0,i.default)(a.default.mark(function e(n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("reload data",n.data),!n.data.next_url){e.next=12;break}if(window.esc.page.game_instance.id===n.data.game_instance_id&&null!=n.data.game_instance_round_id){e.next=12;break}return e.prev=3,e.next=6,E.networking.beforeReload(n.data);case 6:0===window.location.href.indexOf(n.data.next_url)?window.location.reload():window.location.href=n.data.next_url,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("Reload prevented");case 12:case"end":return e.stop()}},e,null,[[3,9]])}));return function(n){return e.apply(this,arguments)}}());var O=E.connect(w,["ESC:List","ESC:Loaded","ESC:Changed"]);n.GameState=O},"./node_modules/@esc_games/esc-controller-sdk/debug/EventsStats.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.EventStats=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),l=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(t("./node_modules/react/index.js")),m=t("./node_modules/react-redux/es/index.js");function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}n.EventStats=function(e){var n=e.map(function(e){return e.managerName});e.forEach(function(e){if(!e.hasOwnProperty("ACTION_EVENT_STATS")||!e.hasOwnProperty("managerName"))throw console.log("Not an event manager",e),new Error("Not an event manager")});var t=function(n){function t(){return(0,a.default)(this,t),(0,l.default)(this,(0,c.default)(t).apply(this,arguments))}return(0,u.default)(t,n),(0,i.default)(t,[{key:"UNSAFE_componentWillMount",value:function(){e.forEach(function(e){return e.setReducerEnabled(e.ACTION_EVENT_STATS,!0)})}},{key:"componentWillUnmount",value:function(){e.forEach(function(e){return e.setReducerEnabled(e.ACTION_EVENT_STATS,!1)})}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement("pre",null,JSON.stringify(this.props,null,2)))}}]),t}(d.Component);return(0,m.connect)(function(e){return{eventStats:n.reduce(function(n,t){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(t,!0).forEach(function(n){(0,s.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},n,(0,s.default)({},t,e[t]?e[t].eventStats:{}))},{})}},function(e){return{}})(t)}},"./node_modules/@esc_games/esc-controller-sdk/debug/debug.css":function(e,n,t){},"./node_modules/@esc_games/esc-controller-sdk/debug/debug.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(n,"__esModule",{value:!0}),n.DebugNotifications=n.DebugManager=void 0;var s=o(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),a=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),d=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),m=r(t("./node_modules/react/index.js"));t("./node_modules/@esc_games/esc-controller-sdk/debug/debug.css");var g,f=o(t("./node_modules/uuid/index.js")),p=t("./node_modules/@esc_games/esc-react-redux/index.js");function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(t,!0).forEach(function(n){(0,a.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var h=function(e){function n(){return(0,i.default)(this,n),(0,c.default)(this,(0,u.default)(n).apply(this,arguments))}return(0,d.default)(n,e),(0,l.default)(n,[{key:"render",value:function(){return m.default.createElement("div",null,m.default.createElement("pre",null,this.props.notifications.map(function(e,n){return m.default.createElement(w,{key:e.uuid,alert:e})}),JSON.stringify(this.props,null,2)))}}]),n}(m.Component),w=function(e){function n(){return(0,i.default)(this,n),(0,c.default)(this,(0,u.default)(n).apply(this,arguments))}return(0,d.default)(n,e),(0,l.default)(n,[{key:"render",value:function(){var e=this.props.alert,n=e.uuid,t=e.message,o=e.top,r=e.left,s=e.timeout,a=e.createTime+s>(new Date).getTime()-300?"visible":"hidden";return m.default.createElement("div",{id:n,className:"ribbon "+a,style:{top:o,left:r}},t)}}]),n}(m.Component),v=new p.EventManager("Debug",new p.ReducerManager((g={},(0,a.default)(g,"NOTIFY",function(e,n){return _({},e,{notifications:[].concat((0,s.default)(e.notifications),[n.value])})}),(0,a.default)(g,"ACTION_DEBUG_NOTIFY_EXPIRE",function(e,n){return _({},e,{notifications:(0,s.default)(e.notifications.filter(function(e){return e.uuid!==n.value}))})}),g),{notifications:[]}));n.DebugManager=v,v.commands={notify:function(e,n,t,o){var r=(0,f.default)();v.dispatchUI({type:"NOTIFY",value:{uuid:r,message:e,createTime:(new Date).getTime(),timeout:n||5e3,top:t||"38%",left:o||"53%"}}),setTimeout(function(){v.dispatchUI({type:"ACTION_DEBUG_NOTIFY_EXPIRE",value:r})},n)}};var E=v.connect(h);n.DebugNotifications=E},"./node_modules/@esc_games/esc-controller-sdk/debug/index.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"EventStats",{enumerable:!0,get:function(){return o.EventStats}}),Object.defineProperty(n,"DebugManager",{enumerable:!0,get:function(){return r.DebugManager}}),Object.defineProperty(n,"DebugNotifications",{enumerable:!0,get:function(){return r.DebugNotifications}});var o=t("./node_modules/@esc_games/esc-controller-sdk/debug/EventsStats.js"),r=t("./node_modules/@esc_games/esc-controller-sdk/debug/debug.js")},"./node_modules/@esc_games/esc-controller-sdk/esc-default.css":function(e,n,t){},"./node_modules/@esc_games/esc-controller-sdk/index.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"EventManager",{enumerable:!0,get:function(){return o.EventManager}}),Object.defineProperty(n,"HANDLER_GROUP_DEFAULT",{enumerable:!0,get:function(){return o.HANDLER_GROUP_DEFAULT}}),Object.defineProperty(n,"ReducerManager",{enumerable:!0,get:function(){return o.ReducerManager}}),Object.defineProperty(n,"initializeStore",{enumerable:!0,get:function(){return o.initializeStore}}),Object.defineProperty(n,"ESCManager",{enumerable:!0,get:function(){return r.ESCManager}}),Object.defineProperty(n,"GameState",{enumerable:!0,get:function(){return r.GameState}}),Object.defineProperty(n,"ACTION_GAME_LIST",{enumerable:!0,get:function(){return r.ACTION_GAME_LIST}}),Object.defineProperty(n,"ACTION_GAME_LOADED",{enumerable:!0,get:function(){return r.ACTION_GAME_LOADED}}),Object.defineProperty(n,"ACTION_GAME_CHANGED",{enumerable:!0,get:function(){return r.ACTION_GAME_CHANGED}}),Object.defineProperty(n,"ACTION_ESC_COIN_AWARD",{enumerable:!0,get:function(){return r.ACTION_ESC_COIN_AWARD}}),Object.defineProperty(n,"ESCGameController",{enumerable:!0,get:function(){return s.ESCGameController}});var o=t("./node_modules/@esc_games/esc-react-redux/index.js"),r=t("./node_modules/@esc_games/esc-controller-sdk/ESCManager.js"),s=t("./node_modules/@esc_games/esc-controller-sdk/ESCGameController.js")},"./node_modules/@esc_games/esc-controller-sdk/input/accelerometer.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(n,"__esModule",{value:!0}),n.initAccelerometerListener=n.ACTION_ACCELEROMETER_ENABLED=n.ACTION_ACCELEROMETER_MOTION=n.CONTROLLER_ACCELEROMETER_MOTION=n.DefaultDeviceMotionHandler=n.DeviceMotion=n.AccelerometerManager=n.Accelerometer=n.GRAVITY=void 0;var s,a=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(t("./node_modules/react/index.js")),g=t("./node_modules/@esc_games/esc-controller-sdk/index.js");function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(t,!0).forEach(function(n){(0,d.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}n.CONTROLLER_ACCELEROMETER_MOTION="AccelerometerInput:MOTION";n.ACTION_ACCELEROMETER_MOTION="AccelerometerUI:MOTION";n.ACTION_ACCELEROMETER_ENABLED="AccelerometerInput:ENABLED";n.GRAVITY=9.81;var b=!1,_=!1,h=!1,w=0,v=function(e){var n=Date.now();if(_||(_=n),w){var t=n-h,o=(e.interval<1?1e3*e.interval:e.interval).toFixed(2);t>1.5*o&&console.warn("Performance slow! devicemotion interval "+o+" last "+(n-h)+" total per second "+w/(n-_)*1e3)}w++,h=n;var r=e.accelerationIncludingGravity;r&&null!=r.x?(b||(b=!0,O.dispatchUI("AccelerometerInput:ENABLED",b),console.log("AccelerometerInput is now available.",e)),O.dispatchEvent("AccelerometerInput:MOTION",r),O.dispatchUI("AccelerometerUI:MOTION",{acc:r,accInterval:e.interval})):!0===b&&(console.log("AccelerometerInput not available on this device. Control with taps, swipes, or keyboard."),b=!1,O.dispatchUI("AccelerometerInput:ENABLED",b))},E=new g.ReducerManager((s={},(0,d.default)(s,"AccelerometerUI:MOTION",function(e,n){return p({},e,{acc:n.value.acc})}),(0,d.default)(s,"AccelerometerInput:ENABLED",function(e,n){return p({},e,{enabled:n.value})}),s)),O=new g.EventManager("Accelerometer",E);n.AccelerometerManager=O;var N=function(e){function n(){return(0,a.default)(this,n),(0,l.default)(this,(0,c.default)(n).apply(this,arguments))}return(0,u.default)(n,e),(0,i.default)(n,[{key:"render",value:function(){var e=this.props,n=(e.acc,e.enabled);return m.default.createElement("div",null,m.default.createElement("div",null,"Accelerometer ",n?m.default.createElement("span",null,"Raw"):m.default.createElement("span",null,"Unavailable"),m.default.createElement("pre",null,JSON.stringify(this.props,null,2))))}}]),n}(m.Component),y=O.connect(N,["AccelerometerInput:ENABLED","AccelerometerUI:MOTION"]);n.Accelerometer=y;var C={config:{thresh:.05,filterThresh:.01,fc:.75},filteredAcc:{x:0,y:0,z:0},lastAcc:{x:0,y:0,z:0},xyzDiff:function(e,n){return{x:e.x-n.x,y:e.y-n.y,z:e.z-n.z}},RoundToFraction:function(e,n){return Math.round(e*n)/n},accRound:function(e){return C.RoundToFraction(e,1024)},handle:function(e){if(e&&null!=e.x){var n=Date.now(),t=C.xyzDiff(e,C.lastAcc),o=n-C.lastUpdateTime,r=C.config.thresh,s=C.config.filterThresh,a=C.config.fc;C.filteredAcc={x:C.filteredAcc.x*a+(1-a)*e.x,y:C.filteredAcc.y*a+(1-a)*e.y,z:C.filteredAcc.z*a+(1-a)*e.z};var i=C.xyzDiff(C.filteredAcc,C.lastAcc),l=t.x>r||t.x<-r||t.y>r||t.y<-r||t.z>r||t.z<-r;((l=l||i.x>s||i.x<-s||i.y>s||i.y<-s||i.z>s||i.z<-s)||o>1e3)&&(e={x:C.accRound(e.x),y:C.accRound(e.y),z:C.accRound(e.z)},C.lastUpdateTime=n,g.ESCManager.networking.sendCommand("AccelerometerData",e))}}};n.DeviceMotion=C;n.initAccelerometerListener=function(){console.log("ESC Input: Registering AccelerometerInput"),void 0===window.DeviceMotionEvent?(b=!1,O.dispatchUI("AccelerometerInput:ENABLED",!1),console.log("AccelerometerInput not available on this device. Control with buttons, swipes, or keys.")):(console.log("window.DeviceMotionEvent available."),window.ondevicemotion=v)};var A=C.handle;n.DefaultDeviceMotionHandler=A},"./node_modules/@esc_games/esc-controller-sdk/input/screen/Fullscreen.css":function(e,n,t){},"./node_modules/@esc_games/esc-controller-sdk/input/screen/Fullscreen.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.getFullscreenElement=p,n.getFullscreenChangeKey=b,n.default=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),d=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(t("./node_modules/react/index.js"));t("./node_modules/@esc_games/esc-controller-sdk/input/screen/Fullscreen.css");var g=["ms","moz","webkit"];function f(){if(document.body.requestFullscreen)return"requestFullscreen";var e=g.find(function(e){return!!document.body["".concat(e,"RequestFullscreen")]});return e?"".concat(e,"RequestFullscreen"):void 0}function p(){if(void 0!==document.fullscreenElement)return document.fullscreenElement;var e=g.find(function(e){return!!document["".concat(e,"FullscreenElement")]});return e?document["".concat(e,"FullscreenElement")]:void 0}function b(){if(document.onfullscreenchange)return"fullscreenchange";var e=g.find(function(e){return null===document["on".concat(e,"fullscreenchange")]});return e?"".concat(e,"fullscreenchange"):void 0}function _(e){var n={};return e.targetTouches?(n.x=e.targetTouches[0].clientX,n.y=e.targetTouches[0].clientY):(n.x=e.clientX,n.y=e.clientY),n}function h(){var e=window.innerWidth===window.screen.availHeight,n=window.top!==window;return console.log("isInMinimalView: isLandscape, isInFrame",e,n,window.innerHeight,window.screen.availWidth),!!n||(e?window.innerHeight===window.screen.availWidth:(window.innerHeight/window.screen.availHeight).toPrecision(4)>.91)}var w=!!f(),v=function(e){function n(e){var t;return(0,s.default)(this,n),t=(0,i.default)(this,(0,l.default)(n).call(this,e)),(0,d.default)((0,c.default)(t),"handleGestureStart",function(e){e.touches&&e.touches.length>1||!w||(document.addEventListener("mousemove",t.handleGestureMove,{passive:!1},!0),document.addEventListener("mouseup",t.handleGestureEnd,!0),t._initialTouchPos=_(e),t._touches=[t._initialTouchPos])}),(0,d.default)((0,c.default)(t),"handleGestureEnd",function(e){if(!(e.touches&&e.touches.length>0)&&w){var n,o=(n=t._touches||[])[0].y>n[n.length-1].y,r=function(e){return e[0].y<e[e.length-1].y}(t._touches||[]);o?(e.preventDefault(),t.enterFullscreen(e)):r&&p()&&(e.preventDefault(),t.exitFullscreen(e)),document.removeEventListener("mousemove",t.handleGestureMove,!0),document.removeEventListener("mouseup",t.handleGestureEnd,!0),t._initialTouchPos=null}}),(0,d.default)((0,c.default)(t),"handleGestureMove",function(e){w&&e.preventDefault(),t._initialTouchPos&&(t._lastTouchPos=_(e),t._touches.push(t._lastTouchPos))}),(0,d.default)((0,c.default)(t),"exitFullscreen",function(){var e=function(){if(document.exitFullscreen)return"exitFullscreen";var e=g.find(function(e){return!!document["".concat(e,"ExitFullscreen")]});return e?"".concat(e,"ExitFullscreen"):void 0}();e?(console.log("Fullscreen: exitFullscreen"),document[e](),t.setState({inAtleastMinimalView:!1})):h()||t.setState({inAtleastMinimalView:!1})}),(0,d.default)((0,c.default)(t),"enterFullscreen",function(e){console.log("Fullscreen, enterFullscreen: isInMinimalView()",h());var n=f();if(n&&!p())try{var o=document.body[n]();o&&o.catch?o.then(function(){t.setState({inAtleastMinimalView:!0}),console.log("Fullscreen: entered fullscreen")}).catch(function(e){console.log("Fullscreen: failed to enter fullscreen mode",e)}):void 0===o&&console.log("Fullscreen: entered fullscreen")}catch(e){console.log("Fullscreen: failed to enter fullscreen mode",e)}else h()&&t.setState({inAtleastMinimalView:!0})}),(0,d.default)((0,c.default)(t),"handleFullscreenChange",function(){console.log("Fullscreen: fullscreen change",p()),t.setState({inAtleastMinimalView:!!p()})}),(0,d.default)((0,c.default)(t),"determineIfInAtleastMinimalView",function(){return requestAnimationFrame(function(){var e=h();console.log("Fullscreen: determineIfInAtleastMinimalView",e),t.setState({inAtleastMinimalView:e})})}),(0,d.default)((0,c.default)(t),"causeFocusOnTakeoverMount",function(e){e&&e.focus()}),t.state={inAtleastMinimalView:!1},t}return(0,u.default)(n,e),(0,a.default)(n,[{key:"componentDidMount",value:function(){document.body.addEventListener("touchstart",this.handleGestureStart,{passive:!1},!0),document.body.addEventListener("touchmove",this.handleGestureMove,{passive:!1},!0),document.body.addEventListener("touchend",this.handleGestureEnd,{passive:!1},!0),document.body.addEventListener("touchcancel",this.handleGestureEnd,!0),document.body.addEventListener("mousedown",this.handleGestureStart,{passive:!1},!0);var e=b();e&&document.addEventListener(e,this.handleFullscreenChange,!0),document.addEventListener("resize",this.determineIfInAtleastMinimalView),this.determineIfInAtleastMinimalView()}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("touchstart",this.handleGestureStart),document.body.removeEventListener("touchmove",this.handleGestureMove),document.body.removeEventListener("touchend",this.handleGestureEnd),document.body.removeEventListener("touchcancel",this.handleGestureEnd),document.body.removeEventListener("mousedown",this.handleGestureStart);var e=b();e&&document.removeEventListener(e,this.handleFullscreenChange),document.removeEventListener("resize",this.determineIfInAtleastMinimalView)}},{key:"render",value:function(){var e=this.state.inAtleastMinimalView;return console.log("Fullscreen: inAtleastMinimalView",e),m.default.createElement(m.Fragment,null,m.default.createElement("div",{id:"virtual-scroll-area",className:w?"":"soft-full-screen"}),!e&&m.default.createElement("div",{id:"full-screen-takeover",className:"size-considering-locked-orientation",tabIndex:"0",ref:this.causeFocusOnTakeoverMount},m.default.createElement("div",{className:"message-container"},m.default.createElement("p",{className:"up-arrow"},"⇡"),m.default.createElement("p",{className:"message"},"Swipe up to start"))))}}]),n}(m.PureComponent);n.default=v},"./node_modules/@esc_games/esc-controller-sdk/input/screen/LockOrientation.css":function(e,n,t){},"./node_modules/@esc_games/esc-controller-sdk/input/screen/LockOrientation.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),d=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(t("./node_modules/react/index.js")),g=t("./node_modules/@esc_games/esc-controller-sdk/input/screen/Fullscreen.js");t("./node_modules/@esc_games/esc-controller-sdk/input/screen/LockOrientation.css");var f=function(){return window.screen&&window.screen.orientation&&"function"==typeof window.screen.orientation.lock},p=function(e){function n(e){var t;return(0,s.default)(this,n),t=(0,i.default)(this,(0,l.default)(n).call(this,e)),(0,d.default)((0,c.default)(t),"handleFullscreenChange",function(){(0,g.getFullscreenElement)()?(console.log("LockOrientation: Attempting lock"),t.attemptLock()):(console.log("LockOrientation: Releasing lock"),t.releaseLock())}),(0,d.default)((0,c.default)(t),"releaseLock",function(){f()&&(window.screen.orientation.unlock(),t.setState({locked:!1}))}),(0,d.default)((0,c.default)(t),"attemptLock",function(){var e=t.props.desiredOrientation,n=void 0===e?"":e;f()?window.screen.orientation.lock(n).then(function(){return t.setState({locked:!0})}).catch(function(e){console.log("LockOrientation: Unable to lock orientation, falling back",e,n)}):console.log("LockOrientation: API not supported, falling back",n)}),t.state={locked:!1},t.attemptLock(),t}return(0,u.default)(n,e),(0,a.default)(n,[{key:"componentDidMount",value:function(){var e=(0,g.getFullscreenChangeKey)();e&&document.addEventListener(e,this.handleFullscreenChange,!0)}},{key:"componentWillUnmount",value:function(){var e=(0,g.getFullscreenChangeKey)();e&&document.removeEventListener(e,this.handleFullscreenChange)}},{key:"render",value:function(){return this.state.locked?null:m.default.createElement("div",{className:"".concat(this.props.desiredOrientation," lock-orientation size-considering-locked-orientation")},"Please rotate your phone.")}}]),n}(m.PureComponent);n.default=p},"./node_modules/@esc_games/esc-controller-sdk/input/screen/NoSleep.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),d=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(t("./node_modules/react/index.js")),g=r(t("./node_modules/nosleep.js/src/index.js")),f=function(e){function n(e){var t;return(0,s.default)(this,n),t=(0,i.default)(this,(0,l.default)(n).call(this,e)),(0,d.default)((0,c.default)(t),"enable",function(e){!t.state.isEnabled&&e&&e.isTrusted&&(e.preventDefault(),t.noSleep.noSleepVideo&&(t.noSleep.noSleepVideo.muted=!0),t.noSleep.enable(),t.setState({isEnabled:!0}),console.log("NoSleep: enable",e))}),(0,d.default)((0,c.default)(t),"disable",function(){console.log("NoSleep: disable"),t.noSleep.disable(),t.setState({isEnabled:!1})}),(0,d.default)((0,c.default)(t),"toggle",function(e){console.log("NoSleep: toggle",e),"hidden"===document.visibilityState?t.disable():t.enable(e)}),t.noSleep=new g.default,document.addEventListener("visibilitychange",t.toggle),document.getElementById("root").addEventListener("click",t.enable),t.state={isEnabled:!1},t}return(0,u.default)(n,e),(0,a.default)(n,[{key:"componentWillUnmount",value:function(){document.getElementById("root").removeEventListener("click",this.enableNoSleep),document.removeEventListener("visibilitychange",this.toggleNoSleepState)}},{key:"render",value:function(){return null}}]),n}(m.PureComponent);n.default=f},"./node_modules/@esc_games/esc-controller-sdk/input/screen/Screen.css":function(e,n,t){},"./node_modules/@esc_games/esc-controller-sdk/input/screen/Screen.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=r(t("./node_modules/@babel/runtime/helpers/extends.js")),l=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),u=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),g=o(t("./node_modules/react/index.js")),f=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/attachOrientation.js")),p=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/preventZoom.js")),b=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/isValidOrientation.js"));t("./node_modules/@esc_games/esc-controller-sdk/input/screen/Screen.css");var _=t("./node_modules/@esc_games/esc-controller-sdk/input/screen/orientation.js");var h={portrait:_.ORIENTATION_PORTRAIT_PRIMARY,landscape:_.ORIENTATION_LANDSCAPE_SECONDARY};var w,v,E=function(e){function n(e){var t;(0,l.default)(this,n),t=(0,u.default)(this,(0,d.default)(n).call(this,e)),(0,a.default)((0,s.default)(t),"attachOrientationNextFrame",function(e){console.log("Screen: attachOrientationNextFrame",e);var n=t.props.desiredOrientation;e&&e.preventDefault(),requestAnimationFrame(function(){return(0,f.default)((0,b.default)(n)?n:null)})}),(0,a.default)((0,s.default)(t),"attachOrientationAndCauseRepaintNextFrame",function(e){console.log("Screen: attachOrientationAndCauseRepaintNextFrame",e);var n=t.props.desiredOrientation;e&&e.preventDefault(),requestAnimationFrame(function(){return function(e){(0,f.default)(e),requestAnimationFrame(function(){window.scrollTo(0,0)})}((0,b.default)(n)?n:null)})}),(0,a.default)((0,s.default)(t),"disableContextMenu",function(e){return e&&e.preventDefault()});var o=e.desiredOrientation,r=e.preventZoom,i=void 0===r||r;window.addEventListener("orientationchange",t.attachOrientationNextFrame),window.addEventListener("resize",t.attachOrientationAndCauseRepaintNextFrame),window.addEventListener("contextmenu",t.disableContextMenu),(0,f.default)(o);var c=document.getElementById("root");return i&&(0,p.default)(c),window.scrollTo(0,0),t}return(0,m.default)(n,e),(0,c.default)(n,[{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.attachOrientationNextFrame),window.removeEventListener("resize",this.attachOrientationAndCauseRepaintNextFrame),window.removeEventListener("contextmenu",this.disableContextMenu)}},{key:"render",value:function(){return null}}]),n}(g.PureComponent),O=(w=E,(v=function(e){function n(){return(0,l.default)(this,n),(0,u.default)(this,(0,d.default)(n).apply(this,arguments))}return(0,m.default)(n,e),(0,c.default)(n,[{key:"render",value:function(){var e=this.props.desiredOrientation,n=h["".concat(void 0===e?"":e).toLowerCase()];return console.log("TranslateDesiredOrientation: translatedDesiredOrientation",n),g.default.createElement(w,(0,i.default)({},this.props,{desiredOrientation:n}))}}]),n}(g.PureComponent)).displayName="withTranslateDesiredOrientation(".concat(w.displayName||"Component",")"),v);n.default=O},"./node_modules/@esc_games/esc-controller-sdk/input/screen/attachOrientation.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,a,i=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/captureAltVmaxUnit.js")),c=o(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/isValidOrientation.js")),u=r(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/orientation.js")),d=(s={},(0,i.default)(s,u.ORIENTATION_PORTRAIT_PRIMARY,"lock-orientation__portrait"),(0,i.default)(s,u.ORIENTATION_LANDSCAPE_SECONDARY,"lock-orientation__landscape"),s),m=(a={},(0,i.default)(a,u.ORIENTATION_PORTRAIT_PRIMARY,"orientation__portrait-primary"),(0,i.default)(a,u.ORIENTATION_PORTRAIT_SECONDARY,"orientation__portrait-secondary"),(0,i.default)(a,u.ORIENTATION_LANDSCAPE_PRIMARY,"orientation__landscape-primary"),(0,i.default)(a,u.ORIENTATION_LANDSCAPE_SECONDARY,"orientation__landscape-seconary"),a);var g=function(e){var n=(0,u.default)().angle,t=(0,c.default)(e)?e:n,o=n,r=document.body;!function(){var e=[].concat(Object.values(m),Object.values(d)),n=document.body;e.forEach(function(e){return n.classList.remove(e)})}(),(0,l.default)(),function(e,n){return e!==n&&(n!==u.ORIENTATION_LANDSCAPE_SECONDARY||e!==u.ORIENTATION_LANDSCAPE_PRIMARY)}(o,t)&&(console.log("attachOrientation: nextOrientation, currentOrientation",t,o),r.classList.add(d[t]),r.classList.add(m[o]))};n.default=g},"./node_modules/@esc_games/esc-controller-sdk/input/screen/captureAltVmaxUnit.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=o(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/orientation.js"));n.default=function(){var e,n,t=(0,a.default)().angle,o=(e={},(0,s.default)(e,a.ORIENTATION_PORTRAIT_PRIMARY,window.innerHeight),(0,s.default)(e,a.ORIENTATION_PORTRAIT_SECONDARY,window.innerHeight),(0,s.default)(e,a.ORIENTATION_LANDSCAPE_PRIMARY,window.innerWidth),(0,s.default)(e,a.ORIENTATION_LANDSCAPE_SECONDARY,window.innerWidth),e),r=(n={},(0,s.default)(n,a.ORIENTATION_PORTRAIT_PRIMARY,window.innerWidth),(0,s.default)(n,a.ORIENTATION_PORTRAIT_SECONDARY,window.innerWidth),(0,s.default)(n,a.ORIENTATION_LANDSCAPE_PRIMARY,window.innerHeight),(0,s.default)(n,a.ORIENTATION_LANDSCAPE_SECONDARY,window.innerHeight),n),i=o[t],l=r[t];console.log("captureAltVmaxUnit: maxSize, minSize",i,l),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerHeight,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerWidth;window.requestAnimationFrame(function(){var t=.01*e,o=.01*n;document.documentElement.style.setProperty("--altVmax","".concat(t,"px")),document.documentElement.style.setProperty("--altVmin","".concat(o,"px"))})}(i,l)}},"./node_modules/@esc_games/esc-controller-sdk/input/screen/isValidOrientation.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i[e]||!1};var r,s=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=t("./node_modules/@esc_games/esc-controller-sdk/input/screen/orientation.js"),i=(r={},(0,s.default)(r,a.ORIENTATION_PORTRAIT_PRIMARY,!0),(0,s.default)(r,a.ORIENTATION_PORTRAIT_SECONDARY,!0),(0,s.default)(r,a.ORIENTATION_LANDSCAPE_PRIMARY,!0),(0,s.default)(r,a.ORIENTATION_LANDSCAPE_SECONDARY,!0),r)},"./node_modules/@esc_games/esc-controller-sdk/input/screen/orientation.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.orientationTypeToOrientationMap=n.orientationToTypeMap=n.ORIENTATION_TYPE_LANDSCAPE_SECONDARY=n.ORIENTATION_TYPE_LANDSCAPE_PRIMARY=n.ORIENTATION_TYPE_PORTRAIT_SECONDARY=n.ORIENTATION_TYPE_PORTRAIT_PRIMARY=n.ORIENTATION_LANDSCAPE_SECONDARY=n.ORIENTATION_LANDSCAPE_PRIMARY=n.ORIENTATION_PORTRAIT_SECONDARY=n.ORIENTATION_PORTRAIT_PRIMARY=void 0;var r,s,a=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js"));n.ORIENTATION_PORTRAIT_PRIMARY=0;n.ORIENTATION_PORTRAIT_SECONDARY=180;n.ORIENTATION_LANDSCAPE_PRIMARY=90;n.ORIENTATION_LANDSCAPE_SECONDARY=-90;n.ORIENTATION_TYPE_PORTRAIT_PRIMARY="portrait-primary";n.ORIENTATION_TYPE_PORTRAIT_SECONDARY="portrait-secondary";n.ORIENTATION_TYPE_LANDSCAPE_PRIMARY="landscape-primary";n.ORIENTATION_TYPE_LANDSCAPE_SECONDARY="landscape-secondary";var i=(r={},(0,a.default)(r,0,"portrait-primary"),(0,a.default)(r,180,"portrait-secondary"),(0,a.default)(r,90,"landscape-primary"),(0,a.default)(r,-90,"landscape-secondary"),r);n.orientationToTypeMap=i;var l=(s={},(0,a.default)(s,"portrait-primary",0),(0,a.default)(s,"portrait-secondary",180),(0,a.default)(s,"landscape-primary",90),(0,a.default)(s,"landscape-secondary",-90),s);n.orientationTypeToOrientationMap=l;var c=function(){var e=screen.msOrientation||screen.mozOrientation||screen.orientation||{angle:window.orientation||0,type:i[window.orientation||0]};return{angle:e.angle>180?e.angle-360:e.angle,type:e.type}};n.default=c},"./node_modules/@esc_games/esc-controller-sdk/input/screen/preventZoom.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){return e.preventDefault()},r=function(e){return 1!==e.scale&&e.preventDefault()};var s=function(e){var n,t=document.querySelector("meta[name=viewport]");t?(t.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no"),e?((n=e).removeEventListener("click",o),n.removeEventListener("gesturestart",r,!1),n.removeEventListener("touchmove",r,!1),function(e){e.addEventListener("click",o),e.addEventListener("gesturestart",r,!1),e.addEventListener("touchmove",r,!1)}(e)):console.error("preventZoom: rootEl not provided, unable to stop errant double touch zooms.",e)):console.error("preventZoom: viewport not found",t)};n.default=s},"./node_modules/@esc_games/esc-controller-sdk/metrics/frameRate.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initFrameRateWatcher=n.frameRateMetrics=void 0;var o={lastFrameTimeStamp:0,lastFrameTimeDelta:0,minTimeDelta:Number.MAX_VALUE,frameCount:0,warnDelta:34};n.frameRateMetrics=o;n.initFrameRateWatcher=function(){requestAnimationFrame(function e(n){o.frameCount++,o.lastFrameTimeStamp&&(o.lastFrameTimeDelta=n-o.lastFrameTimeStamp,o.lastFrameTimeDelta,o.warnDelta,o.minTimeDelta=Math.min(o.minTimeDelta,o.lastFrameTimeDelta),o.warnDelta=Math.max(34,o.minTimeDelta+1)),o.lastFrameTimeStamp=n,requestAnimationFrame(e)})}},"./node_modules/@esc_games/esc-controller-sdk/networking/ESCNetworking.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"publishToAggregator",{enumerable:!0,get:function(){return f.publishToAggregator}}),n.connectionData=n.NetworkDisconnectController=n.EVENT_NETWORK_OPEN=n.EVENT_NETWORK_ERROR=n.ESCNetworkState=n.ESCNetworking=void 0;var s=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(t("./node_modules/@babel/runtime/regenerator/index.js")),d=r(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),m=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),g=(r(t("./node_modules/@esc_games/esc-controller-sdk/networking/polyfillEscConfig.js")),o(t("./node_modules/react/index.js"))),f=t("./node_modules/@esc_games/esc-controller-sdk/networking/pubnubConnection.js"),p=t("./node_modules/@esc_games/esc-controller-sdk/debug/debug.js"),b=t("./node_modules/@esc_games/esc-controller-sdk/ESCManager.js"),_=t("./node_modules/@esc_games/esc-react-redux/index.js"),h=r(t("./node_modules/uuid/index.js")),w=t("./node_modules/@esc_games/esc-controller-sdk/universe/index.js"),v=r(t("./node_modules/@esc_games/esc-controller-sdk/networking/getCookie.js")),E=r(t("./node_modules/@esc_games/esc-controller-sdk/networking/getHostSlug.js"));function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(t,!0).forEach(function(n){(0,m.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var y=!0;console.log("Loading ESCNetworking.js...");n.EVENT_NETWORK_ERROR="NetworkError";n.EVENT_NETWORK_OPEN="NetworkOpen";var C=2;window.testWebsocketPaused=!1;var A=sessionStorage.getItem("controllerUuid");A||(A=(0,h.default)(),sessionStorage.setItem("controllerUuid",A));var S=window.location.hostname,I=8887,k="no_device_id",T="no_guest_hash",P=0,R=0,j="no_request_id",D="no_session_hash",M=3,L="invalid",x="",U="",G=!1;if(window.onbeforeunload=function(){G=!0},window.getWindowEscFromOtherPage=function(e){var n=window.open(e);window.escpopup=n,console.log("Opening window "+e,n),setTimeout(function(){n.postMessage("send window.esc",e),console.log("Send message to "+e)},500)},window.addEventListener("message",function(e){if(!e.origin.startsWith("http://localhost:300")&&!e.origin.match(/^http:\/\/[a-z0-9][a-z0-9-]*[a-z0-9]\.local:300[0-9]/)&&!e.origin.match(/http[s]?\:\/\/(.*)?\.(esc\.games|playesc\.com)$/))return;console.log("Message received:",e),"send window.esc"===e.data?(e.source.postMessage({esc:window.esc},e.origin),window.close()):e.data.esc?(console.log("window.esc received: ",e.data.esc),window.esc=e.data.esc,sessionStorage.setItem("window.esc",JSON.stringify(window.esc))):e.data.simulateMessage&&(console.log("Simulate message received",e.data),$.dispatchEvent(e.data.type,e.data.body))},!1),void 0!==window.esc){var F=window.esc,W=F.page.host_instance;W&&(W.local_port?(S=W.local_url,I=W.local_port):I=null,R=W.id),F.page.game_instance&&(P=F.page.game_instance.id),k=F.global.request.guest_hash,D=F.global.request.session_hash,j=F.global.request.request_id,T=F.global.request.guest_hash,x=F.page.invite_hash,U=F.page.game_controller&&F.page.game_controller.game_controller_type&&F.page.game_controller.game_controller_type.slug||"player",M=F.global.user.id,L=F.global.user.connectionNonce,console.log("ESC Host Instance",F.page.host_instance),console.log("ESC Game Instance",F.page.game_instance),y&&!window.esc.page.pub_nub_config&&(console.warn("PubNub config not set, disabling PubNub. window.esc.page is ",window.esc.page),y=!1)}else console.warn("window.esc is still undefined."),window.esc={};window.esc.getHostSlug=E.default,window.esc.isOfflineGame=function(){try{return-1===window.esc.page.game_instance.id||window.esc.isCloudGame()}catch(e){console.log("game_instance.id not found")}return!1},window.esc.isCloudGame=function(){try{return window.esc.page.host_instance.host_instance_type_id===C}catch(e){return console.error("window.esc.page.host_instance.host_instance_type_id not found"),!1}},window.esc.isAggregateGame=function(){try{return window.esc.page.game_instance.game.is_aggregate_game}catch(e){console.log("is_aggregate_game not found")}return!1},window.esc.isHostAdmin=function(){try{return window.esc.page.user_is_host_admin}catch(e){console.log("is_aggregate_game not found")}return!1},window.esc.getControllerType=function(){return U};var q="https:"!==window.location.protocol?"ws":"wss",V={deviceId:k,gameInstanceId:P,hostInstanceId:R,controllerBuildId:"no_controller_build_id",gameBuildId:1,requestId:j,sessionHash:D,userId:M,guestHash:T,inviteHash:x,wasConnected:!1,connectionNonce:L,controllerType:U};n.connectionData=V;var H=new URL(window.location.href),Y=new URLSearchParams(H.search);!function(e){for(var n in e)e.hasOwnProperty(n)&&Y.has(n)&&(e[n]=Y.get(n))}(V),Y.has("port")&&(I=Y.get("port")),V.userId=parseInt(V.userId),V.gameBuildId=parseInt(String(V.gameBuildId)),V.gameInstanceId=parseInt(V.gameInstanceId),V.hostInstanceId=parseInt(V.hostInstanceId),Y.has("pubnub")?y=Y.get("pubnub"):V.hostInstanceId||(y=!1),console.log("connectionData after setFromParams:",N({},V)),document.cookie="guestHash="+T;var z={port:I,uri:I?"".concat(q,"://").concat(S,":").concat(I):"",myIP:null,ackFrequency:.1,ackFrequencyCount:1,reconnectDelay:500,autoReconnect:!0,player:{deviceId:k,username:T,controllerUuid:A},messageSinceLastPing:!0,pingStats:{count:0,avg:0,totalMs:0,countLong:0,totalMsLong:0},useWebsocket:!!I,websocket:{},messagesSent:0,messagesReceived:0,startTime:(new Date).getTime(),closeCode:0,refusedCode:0,connected:!1,wasConnected:!1,disconnectCount:0,playTime:0,pubNubActive:!1,usePubNub:y,pubNubTimeOffset:f.pubNubTimeOffset,errorLogCount:0};function B(){(!(I=parseInt(I))||I<0)&&(console.warn("No valid controller port, turning off websocket"),z.useWebsocket=!1)}n.ESCNetworkState=z,B();window.esc.isAggregateGame()&&(window.esc.isHostAdmin()||(z.useWebsocket=!1,console.log("Aggregate game, not using webSockets."))),window.esc.isCloudGame()&&(window.esc.isHostAdmin()||(z.useWebsocket=!1,console.log("Cloud game, not using webSockets.")));var J=1,K=!1,Z=function(){return $.eventAsURLfield("RegisterController",{username:T,controllerUuid:A,deviceId:k})};function X(){if(z.useWebsocket)if(window.testWebsocketPaused)setTimeout(X,1e3);else if(S)if(I)if(z.uri="".concat(q,"://").concat(S,":").concat(I),console.log("ESCNetworking: connecting["+J+"] - "+z.uri),z.websocket&&z.websocket.readyState===WebSocket.OPEN)console.log("ESCNetworking: ALREADY CONNECTED["+J+"]");else{var e="/"+JSON.stringify(V),n=K?"?"+Z():"";z.websocket=new WebSocket(z.uri+e+n),z.websocket.onopen=$.onOpen(J),z.websocket.onclose=$.onClose(J),z.websocket.onmessage=$.onMessage(J),z.websocket.onerror=$.onError(J),z.websocket.binaryType="arraybuffer",J++}else console.warn("newWebsocketConnection called without controllerPort being set");else console.warn("newWebsocketConnection called without host being set")}var Q=new _.ReducerManager((0,m.default)({},"Network:Connection",function(e,n){console.log("ReducerManager:",Q);var t=N({},e,{closeCode:n.value.closeCode,refusedCode:n.value.refusedCode,connected:n.value.connected,wasConnected:e.wasConnected||e.connected,disconnectCount:n.value.disconnectCount,pubNubActive:n.value.pubNubActive});return console.log("ReducerManager returns: ",t),t})),$=new _.EventManager("ESCNetworking",Q);n.ESCNetworking=$,Object.assign($,{state:z,messageQueue:[],init:function(){$.newConnection()},eventAsURLfield:function(e,n){return e+"="+encodeURIComponent(JSON.stringify(n))},newConnection:function(){z.useWebsocket&&X(),z.usePubNub&&setTimeout(function(){$.newPubNubConnection()},1)},newPubNubConnection:function(){(0,f.startPubNub)(V,$.dispatchEvent,function(){console.log("PubNub connection to host."),z.pubNubActive=!0,$.dispatchUI("Network:Connection",z),!window.esc.isAggregateGame()&&!window.esc.isCloudGame()||window.esc.isHostAdmin()?$.sendControllerRegister():console.log("Aggregate game, not sending controllerRegister "),z.connected||$.dispatchEvent("NetworkOpen",z),V.wasConnected=!0,z.wasConnected=!0},function(){z.pubNubActive=!1,console.log("pubNub onDisconnection"),$.dispatchUI("Network:Connection",z)},function(){z.pubNubActive=!0,$.dispatchUI("Network:Connection",z),z.connected||$.dispatchEvent("NetworkOpen",z)})},initPlayerId:function(){var e=(0,v.default)("playerid"),n=V.playerId;return n=(n=n||e)||"player-"+Math.random(),document.cookie="playerid="+n,V.playerId=n,$.playerId=n,n},getPlayerId:function(){return $.playerId||$.initPlayerId(),$.playerId},sendControllerRegister:function(){$.sendCommand("RegisterController",{username:T,controllerUuid:A,controllerType:U,deviceId:k})},onOpen:function(e){return function(){console.log("ESCNetworking: CONNECTED{"+e+"]"),z.messageSinceLastPing=!0,$.keepalive(e),z.disconnectCount=0,z.connected=!0,$.sendControllerRegister(),$.dispatchUI("Network:Connection",z),z.pubNubActive||$.dispatchEvent("NetworkOpen",z),V.wasConnected=!0,z.wasConnected=!0}},onClose:function(e){return function(n){if(G)console.log("WebSocket onclose event while window unloading.");else{z.username="",z.connected?z.closeCode=n.code:z.refusedCode=n.code,clearInterval($.keepaliveInterval[e]),console.log("ESCNetworking: DISCONNECTED["+e+"]",n,n.code,z.websocket.readyState),!window.esc.isOfflineGame()&&z.autoReconnect&&(z.disconnectCount++,z.disconnectCount<5?X():(5===z.disconnectCount&&(console.log("dispatching EVENT_NETWORK_ERROR ESCNetworking ",b.ESCManager),$.dispatchUI("Network:Connection",z),$.dispatchEvent("NetworkError",z)),setTimeout(function(){X()},5e3))),z.connected=!1}}},ab2str:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},onMessage:function(){return function(e){if(!window.testWebsocketPaused){z.messageSinceLastPing=!0;var n=$.ab2str(e.data);if(1!==n.length){var t=n.substring(1);$.dispatchRawEvent(t),z.messagesReceived++,z.playTime=(new Date).getTime()-z.startTime,b.ESCManager.dispatchUI(b.ACTION_GAME_LOADED,z)}}}},onError:function(){return function(e){console.log("ESCNetworking: ERROR["+e.code+"]: ",e),z.websocket.readyState===WebSocket.CONNECTING&&p.DebugManager.commands.notify("Unable to connect to "+z.uri)}},pinger:function(e,n,t){if(1!==e){e--;var o=setInterval(function(){z.websocket.readyState===WebSocket.OPEN&&$.sendCommand("Ping",{time:Date.now(),message:t}),1!==e?(z.messageSinceLastPing=!1,(e-=1)<=0&&(e=0)):clearInterval(o)},n);return!z.messageSinceLastPing&&z.pingStats.count?(console.log("No message since last ping, disconnecting"),$.closeConnection(),void clearInterval(o)):o}$.sendCommand("Ping",{time:Date.now(),message:t})},keepaliveInterval:{},keepalive:function(e){null==$.keepaliveInterval[e]&&($.keepaliveInterval[e]=$.pinger(0,400,"keepalive"))},_send:function(e){if(z.websocket.readyState!==WebSocket.OPEN)return $.messageQueue.push(e),void($.messageQueue.length>10?($.messageQueue.shift(),console.log("ESCNetworking: Attempt to send when disconnected - queue full, shifting out message")):console.log("ESCNetworking: Attempt to send when disconnected - queuing message"));window.testWebsocketPaused||z.websocket.send(e),z.messagesSent++},closeConnection:function(){console.log("ESCNetworking: Closing websocket"),z.websocket.close()},sendCommand:function(e,n){"Ping"!==e&&(z.pubNubActive||window.esc.isOfflineGame()||window.esc.isCloudGame())&&z.websocket.readyState!==WebSocket.OPEN?(0,f.pubNubSendEvent)(e,n):$._send("e"+e+":"+JSON.stringify(n))},setUsername:function(e){z.username!==e&&(z.username=e,$._send("u"+z.username))},sendUpdateWebsocket:function(e,n){z.usernamePlayer=z.username;var t=[];n.shift(),n.forEach(function(e){t.push(e.value)}),$.sendJSON({keys:e,values:t})},sendUpdate:function(e,n){$.sendUpdateWebsocket(e,n)},sendJSON:function(e){$.setUsername(z.usernamePlayer),$._send("s"+JSON.stringify(e))},errorLog:function(e,n,t,o){z.errorLogCount++,z.errorLogCount>10?11===z.errorLogCount&&console.warn("Maximum number of error logs reached, logging is stopped."):(n=n||(0,f.getErrorLogsChannel)(),y?(console.log("Logging error to pubNub channel "+n,e),(0,f.pubNubLog)(e,n,t,o)):console.log("errorLog:",e))},track:function(e,n,t,o){n=n||(0,f.getGameTrackingChannel)(),y?(0,f.pubNubLog)(e,n,t,o):console.log(e)},log:function(e,n,t,o){n=n||(0,f.getGameTrackingChannel)(),y?(0,f.pubNubLog)(e,n,t,o):console.log(e)},testUncaughtError:function(){console.log("This should cause an error: "+(void 0).a)},startSubscriber:f.startSubscriber,startCoinSubscriber:function(e){(0,w.startCoinSubscriber)(function(n){e&&e(n),console.log("Dispatching ACTION_ESC_COIN_AWARD",n),$.dispatchEvent(b.ACTION_ESC_COIN_AWARD,n)})}}),$.registerEventHandler("Pong",_.HANDLER_GROUP_DEFAULT,function(e){var n=Date.now(),t=e.time;if(t>0){var o=n-t;o<1e3?(z.pingStats.totalMs+=o,z.pingStats.count++,z.pingStats.avg=Math.round(z.pingStats.totalMs/z.pingStats.count)):(z.pingStats.totalMsLong+=o,z.pingStats.countLong++,console.log("Network Latency: "+o+", greater than 1 second; not counted in total. Assumed to be a disconnection or game server not running."))}b.ESCManager.dispatchUI(b.ACTION_GAME_LOADED,z)}),$.registerEventHandler("ControllerRegistered",_.HANDLER_GROUP_DEFAULT,function(e){z.player.deviceId=e.deviceId,z.player.username=e.username,z.player.controllerUuid=e.controllerUuid,b.ESCManager.dispatchUI(b.ACTION_GAME_LOADED,z)}),$.beforeReload=function(){return Promise.resolve()},$.registerEventHandler("Reload",_.HANDLER_GROUP_DEFAULT,function(){var e=(0,d.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.ESCManager.networking.beforeReload(n.data);case 3:window.location=n.url,e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0){e.next=12;break}return console.error("Error caught, reloading",e.t0),window.location=n.url,e.abrupt("return");case 12:console.log("Reload prevented");case 13:case"end":return e.stop()}},e,null,[[0,6]])}));return function(n){return e.apply(this,arguments)}}()),console.log("Done loading ESCNetworking.js"),window.escNetworking=$,window.escNetworkState=z,$.initPlayerId(),$.registerEventHandler("NetworkError",_.HANDLER_GROUP_DEFAULT,function(e){console.log("Network error, closeCode: "+e.closeCode+" refusedCode: "+e.refusedCode+" disconnectCount: "+e.disconnectCount)});var ee=function(e){function n(){return(0,s.default)(this,n),(0,i.default)(this,(0,l.default)(n).apply(this,arguments))}return(0,c.default)(n,e),(0,a.default)(n,[{key:"render",value:function(){console.log("NetworkDisconnectComponent: ",this.props);var e=this.props.connected||this.props.pubNubActive?"":g.default.createElement("div",{className:"network-disconnect"},this.props.wasConnected?"Lost connection. Attempting to reconnect...":"Unable to connect..."),n=this.props.pubNubActive?g.default.createElement("div",{className:"pubnub-active pubnub-status"},"PN"):g.default.createElement("div",{className:"pubnub-inactive pubnub-status"},"PN"),t=this.props.connected?g.default.createElement("div",{className:"websocket-active websocket-status"},"WS"):g.default.createElement("div",{className:"websocket-inactive websocket-status"},"WS");return g.default.createElement("div",null,e,t,n)}}]),n}(g.Component);window.SwitchWebSocketPort=function(e){I=e,z.port=I,z.uri="".concat(q,"://").concat(S,":").concat(I),z.useWebsocket=!0,B(),z.websocket&&z.websocket.readyState===WebSocket.OPEN&&($.closeConnection(),z.useWebsocket&&X())};var ne=$.connect(ee,["Network:Connection"]);n.NetworkDisconnectController=ne},"./node_modules/@esc_games/esc-controller-sdk/networking/getCookie.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){for(var n=e+"=",t=decodeURIComponent(document.cookie).split(";"),o=0;o<t.length;o++){var r=t[o].trim();if(0===r.indexOf(n))return r.substring(n.length,r.length)}return""};n.default=o},"./node_modules/@esc_games/esc-controller-sdk/networking/getHostSlug.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=null,r=function(){if(null!==o)return o;var e=!1;try{e=window.esc.page.host.slug}catch(e){console.warn("window.esc.page.host.slug not found")}if(!e)try{e=window.esc.page.host_instance.host.slug}catch(e){console.warn("window.esc.page.host_instance.host.slug not found")}return e||(e=window.location.pathname.slice(1)),e?o=e:null};n.default=r},"./node_modules/@esc_games/esc-controller-sdk/networking/index.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ESCNetworking",{enumerable:!0,get:function(){return o.ESCNetworking}}),Object.defineProperty(n,"ESCNetworkState",{enumerable:!0,get:function(){return o.ESCNetworkState}}),Object.defineProperty(n,"publishToAggregator",{enumerable:!0,get:function(){return o.publishToAggregator}});var o=t("./node_modules/@esc_games/esc-controller-sdk/networking/ESCNetworking.js")},"./node_modules/@esc_games/esc-controller-sdk/networking/polyfillEscConfig.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./node_modules/@esc_games/esc-controller-sdk/networking/getCookie.js")),s=o(t("./node_modules/@esc_games/esc-controller-sdk/networking/getHostSlug.js"));function a(e){switch(e){case 1:return"player";case 2:return"admin";case 3:return"join";case 4:return"spectator";case 5:return"custom"}}var i=function(){window.UsingTestESC=!1;var e="no_guest_hash";if(void 0===window.esc){if(console.log("window.esc is undefined, trying to get it another way"),!window.esc){console.log("Trying to get window.esc from sessionStorage");var n=sessionStorage.getItem("window.esc");if(n)try{window.esc=JSON.parse(n),console.log("window.esc loaded from sessionStorage"),window.UsingTestESC=!1}catch(e){window.esc=null}}if(!window.esc){var t="4cf719209059de1dd4a55022d425114e30681b55";window.esc={global:{notifications:[],has_notifications:!1,debug_mode_enabled:!1,has_session_messages:!1,session_messages:[],user:{id:30,name:"TestUser",groups:[],permissions:{},is_verified:!1,email:"",timezone_offset:0,ip:"127.0.0.1",cache:{},is_authenticated:!0,dst_auto:0,dst:0,isMobile:!1,isTablet:!1,isPhone:!1,is_bot:"0",beta_access:!0,entity:{},session:{},applicationUserAccessToken:null,session_entity:{type:"SessionEntity",session_hash:"this-is-a-test-session-hash"},guest_entity:{type:"GuestEntity"}},config:{static_url:"/static/",media_url:"/media/",images_url:"/static/images/",raw_js:!0,raw_css:!0,is_dev:!1,ga_id:"UA-123681863-1",www_url:"https://www.esc.games",play_url:"https://play.esc.games",develop_url:"https://develop.esc.games",api_url:"https://api.esc.games"},request:{request_id:Math.random(),request_et_id:null,request_checksum:null,request_utm_medium:null,request_utm_source:null,request_utm_campaign:null,request_utm_term:null,get:[],build_query:"?",section:"i",page_content_audience:1,ajax:!1,page:"play"}},page:{host_instance:{type:"HostInstanceEntity",public_host_domain:"qa1.playesc.com",public_host_name:"2f358fe9b41e47d4af368c7ef51edebe",local_port:"8887",local_url:"localhost",host:{type:"HostEntity"},network:{type:"NetworkEntity",is_active:"1"},game_instances:{type:"NetworkEntity",is_active:"1"},user_is_host_admin:!0,host_instance_type_id:2},game_instance:{type:"GameInstanceEntity",game:{type:"GameEntity"},game_build:{type:"GameBuildEntity"},game_controllers:{type:"GameBuildEntity"},custom_game_assets:[]},game_controller:{game_controller_type_id:1,game_controller_type:{slug:a(1)}},user_is_host_admin:!0,invite_hash:null,controller_pub_sub_channels:{},user_stats:{total_coins:0}}},window.esc.global.request.guest_hash||(""===(e=(0,r.default)("guestHash"))&&(e=("player-"+Math.random()).padEnd(40,"0")),window.esc.global.request.guest_hash=e),e=window.esc.global.request.guest_hash,window.esc.page.game_instance.pub_nub_channels={game_aggregate_pub:!1,game_aggregate_sub:!1,game_broadcast:{channel_type:"game_broadcast",channel_name:"broadcast.game-"+t,publish_auth_key:null,subscribe_auth_key:"broadcast..bad57a3ade323e500367bf520c015fccfc98d8da"},game_config:{channel_type:"game_config",channel_name:"game_config.game-"+t,publish_auth_key:null,subscribe_auth_key:"game_config..bad57a3ade323e500367bf520c015fccfc98d8da"},game_direct:{channel_type:"game_direct",channel_name:"direct.game-"+t,publish_auth_key:"host-10c8fdb30b8cd2bef7421f8fe176399e_pub",subscribe_auth_key:"host-10c8fdb30b8cd2bef7421f8fe176399e_sub"},game_round_config:{channel_type:"game_round_config",channel_name:"round_config.game-"+t,publish_auth_key:null,subscribe_auth_key:"round_config..bad57a3ade323e500367bf520c015fccfc98d8da"},game_player_direct:{channel_type:"game_player_direct",channel_name:"player."+e+"_direct",publish_auth_key:null,subscribe_auth_key:null},game_tracking:{channel_type:"game_tracking",channel_name:"gameTracking.game-"+t,publish_auth_key:"gameTracking..5e7581ffc7ec8631ab3b7cf9e788d7a2a1b8ef8f",subscribe_auth_key:null},offline_broadcast:{channel_type:"offline_broadcast",channel_name:"broadcast.hostSlug."+(0,s.default)(),publish_auth_key:null,subscribe_auth_key:"offline_broadcast..2088e070ee4e79d3eddb89cb63c3fa3f3ef0a68a"},coin_broadcast:{channel_type:"coin_broadcast",channel_name:"coin.hostSlug."+(0,s.default)(),publish_auth_key:null,subscribe_auth_key:"coin_broadcast..2088e070ee4e79d3eddb89cb63c3fa3f3ef0a68a"},game_error_logs:{channel_type:"game_error_logs",channel_name:"logs.test",publish_auth_key:"logs..2088e070ee4e79d3eddb89cb63c3fa3f3ef0a68a",subscribe_auth_key:null}},window.UsingTestESC=!0}}else sessionStorage.setItem("window.esc",JSON.stringify(window.esc))}();n.default=i},"./node_modules/@esc_games/esc-controller-sdk/networking/pubnubConnection.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),n.startPubNub=function(e,n,t,o,r){if(p)return!1;var a=window.esc.page.pub_nub_config;if(!a)return console.log("No pubNub config, not starting PubNub"),!1;(h=e).origin=window.location.origin,U=M(),G=function(){var e=M();if(null!=e)return e.substring(0,e.indexOf(".",e.indexOf(".")+1));return null}(),a.uuid=U,p=new s.default(a),console.log(p),p.publish,Y&&(Y=n);t&&(J=t);o&&(z=o);r&&(B=function(){r(),te()});A=function(){try{return window.esc.page.game_instance.pub_nub_channels.offline_broadcast.channel_name}catch(e){return console.error("Unable to find offline_broadcast channel.",e),null}}(),S=function(){try{return 2!==window.esc.page.host_instance.host_instance_type_id?null:"broadcast.hostSlug."+window.esc.page.host_instance.host.slug}catch(e){return console.error("Unable to find offline_broadcast channel.",e),null}}(),P(),F=R(),L(),W=j(),k=function(){try{return window.esc.page.game_instance.pub_nub_channels.game_config.channel_name}catch(e){return console.warn("Unable to find game_state channel. Using game_broadcast channel instead",e),T()}}(),window.esc.isOfflineGame()?(I=T(),null,x=D()):(I=T(),window.esc.isAggregateGame()?($(),x=window.esc.isHostAdmin()?D(h.hostInstanceId):null):(null,x=D(h.hostInstanceId)));p.addListener({status:function(e){switch(e.category){case"PNConnectedCategory":console.log("PubNub connected status event",e),C(),N.interval=setInterval(C,N.period),le(),te(),Q(c,{time:Date.now(),message:e.category});break;case"PNNetworkUpCategory":console.log("PubNub network UP status event",e),oe();break;case"PNTimeoutCategory":case"PNBadRequestCategory":case"PNNetworkDownCategory":case"PNAccessDeniedCategory":case"PNUnknownCategory":case"PNNetworkIssuesCategory":console.log("PubNub status event, treating as disconnect",e),K();break;default:console.log("Unexpected PubNub status event",e)}},message:function(e){if(e.channel===k?console.log("Game state message received, eventName "+e.message.eventName+"\n",e.message.body):e.channel===I?console.log("Broadcast message received, eventName "+e.message.eventName+"\n",e.message.body):console.log("Regular message received, eventName "+e.message.eventName+"\n",e.message.body),window.testPubNubPaused)console.log("PubNub test paused, received message ",e);else{if(e.message.eventName===u)return w?console.error("PubNub received a second ".concat(u," message.")):(b=!0,_=!0,J()),void(w=!0);!function(){if(b)return;if(_)return b=!0,void B();!window.esc.isOfflineGame()&&x&&ae()}(),q=!0,e.message.body._fromHistory=!1;var n=y(e.timetoken);e.message.body._publishTime=n+N.min,e.message.eventName&&Y(e.message.eventName,e.message.body)}}}),oe(),console.log("PubNub Host channel: "+x),!window.esc.isOfflineGame()&&x?(ae(),H(0,g,"pubnub")):console.log("Not starting pubnub pinger.");return Object.keys(window.esc.page.game_instance.pub_nub_channels).forEach(function(e){console.log(e,window.esc.page.game_instance.pub_nub_channels[e])}),p},n.stopPubNub=function(){if(!p)return!1;p.stop(),p=!1,K()},n.startSubscriber=function(e,n,t,o){var r=n.subscribeKey||n.subscribe_key;console.log("startSubscriber",{channels:e,subscribeKey:r,filter:o});var a=new s.default({subscribeKey:r});o&&a.setFilterExpression(o);return a.addListener({status:function(e){"PNConnectedCategory"===e.category&&function(e){console.log("Connected",e)}(e)},message:function(e){t(e)},presence:function(e){console.log("presence message",e)}}),console.log("Subscribing to ",e),a.subscribe({channels:e}),a},n.pubNubSend=Z,n.pubNubSendEvent=Q,n.publishToAggregator=ne,n.pubNubLog=X,n.startJavaScriptErrorLog=le,n.getGamePlayerDirectChannel=function(){return U},n.getGameTrackingChannel=j,n.getErrorLogsChannel=R,n.getCoinsChannel=P,n.pubNubTimeOffset=void 0;var r=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),s=o(t("./node_modules/pubnub/dist/web/pubnub.min.js")),a=o(t("./node_modules/@esc_games/esc-controller-sdk/input/screen/orientation.js"));function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(t,!0).forEach(function(n){(0,r.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var c="Ping",u="Connected",d="logs.",m="game_tracking.",g=1e4,f=250,p=!1,b=!1,_=!1,h=null,w=!1;window.testPubNubPaused=!1;var v=15,E=1,O=v,N={filtered:0,last:0,average:0,min:0,max:0,count:0,period:5e3,interval:null};function y(e){return parseInt(e.slice(0,-4))+parseInt(e.slice(-4))/1e4}function C(){p.time(function(e,n){if(e.error)console.error("Error calling pubNub.time",{status:e,response:n});else{var t=n.timetoken/1e4;o=Date.now()-t,N.count++,1===N.count?(N.filtered=o,N.min=o,N.max=o,N.average=o):(N.filtered=(N.filtered+o)/2,N.min=Math.min(o,N.min),N.max=Math.max(o,N.max),N.average=(N.average*(N.count-1)+o)/N.count),N.last=o,console.log("pubNubTimeOffset",N)}var o})}n.pubNubTimeOffset=N;var A=null,S=null,I=null,k=null;function T(){try{return window.esc.page.game_instance.pub_nub_channels.game_broadcast.channel_name}catch(e){return console.error("Unable to find game_broadcast channel.",e),null}}function P(){try{return window.esc.page.game_instance.pub_nub_channels.coin_broadcast.channel_name}catch(t){var e=window.esc.getHostSlug();if(e){var n="coin.hostSlug."+e;return console.warn("Unable to find coin_broadcast channel. Using "+n),n}return console.error("Unable to find coin_broadcast channel.",t),null}}function R(){try{return window.esc.page.game_instance.pub_nub_channels.game_error_logs.channel_name}catch(n){var e=L();return console.warn("Unable to find game_error_logs channel. Using "+e,n),e}}function j(){try{return window.esc.page.game_instance.pub_nub_channels.game_tracking.channel_name}catch(n){var e=m+esc.page.game_instance.id;return console.warn("Unable to find game_tracking channel. Using "+e),e}}function D(e){var n=null;if(window.UsingTestESC)e&&(n="host-"+e);else try{n=window.esc.page.game_instance.pub_nub_channels.game_direct.channel_name}catch(e){return console.warn("Unable to find game_direct channel. Using game_broadcast channel instead",e),null}return n}function M(){try{return window.esc.page.game_instance.pub_nub_channels.game_player_direct.channel_name}catch(e){return console.warn("Unable to find game_direct channel. Not subscribing to anything",e),null}}function L(){return d+window.esc.global.request.guest_hash+"."+esc.page.game_instance.id}var x=!1,U=!1,G=!1,F=!1,W=!1,q=!0;window.stopPubNubPingerAndDisconnect=function(){!1,clearTimeout(V),K()};var V=!1;function H(e,n,t){p&&(console.log("Pinging "+x+" on PubNub, messageReceivedSinceLastPing: "+q+", sending message:",t),Q(c,{time:Date.now(),message:t}),q||K(),q=!1,1!==e?(!0,V=setTimeout(function(){H(e<1?0:e-1,n,t)},n)):!1)}function Y(){console.log("PubNub dispatchEvent() not defined.")}function z(){console.log("PubNub disconnect.")}function B(){console.log("PubNub reconnect."),te()}function J(){console.log("PubNub connected.")}function K(){b&&z(),q=!1,b=!1}function Z(e){!window.testPubNubPaused&&x&&(0===O&&(console.warn("PubNub publish rate limit warning, more than ".concat(v," messages in last ").concat(1===E?"":E,"s."),e),O+=v),O--,setTimeout(function(){O++},1e3*E),e.replyChannel=U,p.publish({channel:x,message:e},function(n,t){n.error?(console.error("PubNub error sending message to "+x,e,n,t),K()):console.log("PubNub message sent to "+x,e,n,t)}))}function X(e,n,t,o){window.testPubNubPaused||(n=n||W||F,o=o||1e3,void 0===t&&(t=100),e.info||(e.info={userId:window.esc.global.user.id,userName:window.esc.global.user.username,ip:window.esc.global.user.ip,requestId:window.esc.global.request.request_id,sessionHash:window.esc.global.user.session_entity.session_hash,guestHash:window.esc.global.user.guest_entity.guest_hash,gameInstanceId:window.esc.page.game_instance.id,sessionId:window.esc.global.user.session_entity.id,device:{userAgent:window.navigator.userAgent,client:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},screen:{width:window.screen.width,height:window.screen.height,orientation:(0,a.default)().type},inner:{width:window.innerWidth,height:window.innerHeight},devicePixelRatio:window.devicePixelRatio}}),p.publish({channel:n,message:e},function(r,s){r.error&&(console.error("PubNub error sending log message to "+n+(t?". Will retry in "+o/1e3+" seconds.":". Will not retry."),e,r,s),t&&setTimeout(function(){X(e,n,t-1,o)},o))}))}function Q(e,n){Z({eventName:e,body:n})}function $(){try{var e=window.esc.page.game_instance.pub_nub_channels.game_aggregate_pub.channel_name;return e.startsWith("aggregate.")?e:"aggregate.".concat(window.esc.page.game_instance.id)}catch(e){console.warn("Unable to find game aggregate channel.",e);try{return"aggregate.".concat(window.esc.page.game_instance.id)}catch(e){return console.warn("Unable to find game_instance.id",e),!1}}}function ee(e,n,t,o,r){return!(!o||o<0)&&(r=r||f,console.log("Retrying publishToAggregator in "+r/1e3),setTimeout(function(){ne(e,n,t,o-1,r)},r),!0)}function ne(e,n,t,o,r){if(!p)return console.error("publishToAggregator called but pubNub is not initialized."),ee(e,n,t,o,r),!1;if(!p.fire)return console.error("publishToAggregator called but pubNub.fire is not available."),ee(e,n,t,o,r),!1;var s=$();if(!s)return console.warn("publishToAggregator called before game instance set"),ee(e,n,t,o,r),!1;var a=Date.now();return p.fire({channel:s,message:e},function(i,l){var c=Date.now(),u=c-a;if(i.error){var d={error:"Error publishing to aggregator",status:i,response:l,channel:s,message:e,userId:window.esc.global.user.id,sessionId:window.esc.global.user.session_entity.id,requestTime:a,responseTime:c,delayTime:u,retries:o};"PNTimeoutCategory"===i.category?console.error("Error PNTimeoutCategory publishing to aggregator, requestTime "+a+" responseTime "+c+" delayTime "+u):"getaddrinfo"===i.errorData.syscall?(console.error("Error publishing to aggregator: "+i.errorData.syscall+" code "+i.errorData.code),d.syscall=i.errorData.syscall,d.code=i.errorData.code):console.error("Error publishing to aggregator: ",i,l),X(d),ee(e,n,t,o,r)||n&&n(i.error)}else t&&t(l),console.log("Published to aggregator channel "+s,e)}),!0}function te(e){console.log("Getting last state message");var n=function(n){return function(o,r){try{if(o.error)return console.error("getLastState history returned error.",n,o,r),void t(n);if(!r.messages)return console.error("getLastState returned no messages.",n,o,r),void t(n);if(!r.messages.length)return console.error("getLastState returned empty list of messages.",n,o,r),void t(n);var s=y(r.messages[0].timetoken),a=Date.now()-s-N.filtered;console.log("Approximate state message age in seconds "+a/1e3);var i=r.messages[0].entry;console.log("State message:",n,JSON.stringify(r.messages[0],null,2)),i.eventName&&(a>1e5&&console.log("PubNub last state message over 100 seconds old. OK."),console.log("PubNub dispatching last state message",n,i),i.body._fromHistory=!0,i.body._publishTime=s+N.min,Y(i.eventName,i.body)),e&&e(o,r)}catch(e){console.error("Error exception getting state history. Is history enabled for this pubnub keyset?",e)}}};function t(e){e!==G&&e!==I&&p.history({channel:I,count:1,stringifiedTimeToken:!0},n(I))}p.history({channel:k,count:1,stringifiedTimeToken:!0},n(k)),p.history({channel:G,count:1,stringifiedTimeToken:!0},n(G))}function oe(){var e=[U,G];I&&e.push(I),S&&e.push(S),A&&A!==I&&e.push(A),console.log("Subscribing to PubNub channels",e),p.subscribe({channels:e})}window.pubNubPinger=H;var re=0,se=1e3;function ae(){if(!w&&x){var e=Date.now();if(!(e-re<se)){re=e,h.replyChannel=U;var n={connectionData:l({},h),replyChannel:U};p.publish({channel:x,message:n},function(e,t){e.error?(console.error("PubNub error sending connectionData to "+x,n,e,t),K()):console.log("PubNub connectionData sent to "+x,n,e,t)})}}}var ie=!1;function le(){ie||(console.log("Starting JavaScript error logging"),window.addEventListener("error",function(e){X({error:{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,timeStamp:e.timeStamp,stack:e.error.stack}},F)}),ie=!0)}},"./node_modules/@esc_games/esc-controller-sdk/universe/coinSubscriber.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.startCoinSubscriber=void 0;var o=t("./node_modules/@esc_games/esc-controller-sdk/networking/pubnubConnection.js"),r=t("./node_modules/@esc_games/esc-controller-sdk/networking/index.js");function s(e,n,t){var o=e.split(t);return o.forEach(function(e,t){o[t]=e.split(n).slice(1,-1)}),o}n.startCoinSubscriber=function(e){var n=window.esc.page.pub_nub_config;if(n){var t=window.esc.global.user.session_entity.session_hash||"devfakesessionhash",a="ids contains '_".concat(t.slice(0,6),"'"),i=(0,o.getCoinsChannel)();return console.log("startCoinSubscriber for sessionHash "+t,n),r.ESCNetworking.startSubscriber([i],n,function(n){console.log("Received coin message\n",n);var o=n.userMetadata;if(o)if(o.ids)if(o.coins){var r=s(o.ids,"_","~"),a=s(o.coins,"_","~"),i=[];r.forEach(function(e,n){var o=a[n].length;e.forEach(function(e,r){if(t.startsWith(e)){var s=Math.min(r,o);i.push(a[n][s])}})}),e&&e(i)}else console.error("Coins message received but no userMetaData.coins");else console.error("Coins message received but no userMetaData.ids");else console.error("Coins message received but no userMetaData")},a)}console.log("Not starting coin subscriber because no pubnub config")}},"./node_modules/@esc_games/esc-controller-sdk/universe/index.js":function(e,n,t){"use strict";var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"startCoinSubscriber",{enumerable:!0,get:function(){return c.startCoinSubscriber}}),n.CoinManager=n.EVENT_CHANGE_COINS=n.EVENT_REMOVE_COINS=n.EVENT_ADD_COINS=n.ACTION_REMOVE_COINS=n.ACTION_ADD_COINS=n.ACTION_SET_COINS=void 0;var r,s=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=t("./node_modules/@esc_games/esc-react-redux/index.js"),i=t("./node_modules/@esc_games/esc-controller-sdk/networking/index.js"),l=t("./node_modules/@esc_games/esc-controller-sdk/ESCManager.js"),c=t("./node_modules/@esc_games/esc-controller-sdk/universe/coinSubscriber.js");function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(t,!0).forEach(function(n){(0,s.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}console.log("ESC Universe loading.");n.ACTION_SET_COINS="ESC_UNIVERSE:SET_COINS";n.ACTION_ADD_COINS="ESC_UNIVERSE:ADD_COINS";n.ACTION_REMOVE_COINS="ESC_UNIVERSE:REMOVE_COINS";n.EVENT_CHANGE_COINS="ESC_UNIVERSE:CHANGE_COINS";n.EVENT_ADD_COINS="ESC_UNIVERSE:ADD_COINS";n.EVENT_REMOVE_COINS="ESC_UNIVERSE:REMOVE_COINS";var m=new a.ReducerManager((r={},(0,s.default)(r,"ESC_UNIVERSE:SET_COINS",function(e,n){return d({},e,{},n.value)}),(0,s.default)(r,"ESC_UNIVERSE:ADD_COINS",function(e,n){return console.log("ACTION_ADD_COINS",e,n),d({},e,{},n.value,{coins:e.coins+n.value.coins})}),(0,s.default)(r,"ESC_UNIVERSE:REMOVE_COINS",function(e,n){return d({},e,{},n.value,{coins:e.coins-n.value.coins})}),r),{coins:window.esc.page.user_stats.total_coins||0}),g=new a.EventManager("CoinManager",m);n.CoinManager=g,setTimeout(function(){i.ESCNetworking.startCoinSubscriber(function(e){console.log("Coins received: ",e)}),i.ESCNetworking.registerEventHandler(l.ACTION_ESC_COIN_AWARD,"Universe",function(e){console.log("Coin award event",e),e.forEach(function(e){g.commands.awardCoins(e)})}),console.log("ESC Universe initialized.")},1),g.commands={awardCoins:function(e){e=parseFloat(e),g.dispatchUI("ESC_UNIVERSE:ADD_COINS",{coins:e}),console.log("new state",g.store.getState()[g.managerName]);var n=g.store.getState()[g.managerName].coins;console.log("awardCoins",{coins:e,total:n}),g.dispatchEvent("ESC_UNIVERSE:ADD_COINS",{coins:e,total:n}),g.dispatchEvent("ESC_UNIVERSE:CHANGE_COINS",{coins:e,total:n})},removeCoins:function(e){g.dispatchUI("ESC_UNIVERSE:REMOVE_COINS",{coins:e});var n=g.store.getState()[g.managerName].coins;g.dispatchEvent("ESC_UNIVERSE:REMOVE_COINS",{coins:e,total:n}),g.dispatchEvent("ESC_UNIVERSE:CHANGE_COINS",{coins:-e,total:n})}}}}]);